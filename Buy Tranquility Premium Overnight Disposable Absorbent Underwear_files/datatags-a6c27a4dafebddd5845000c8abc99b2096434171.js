!function(){var t,n,e,o={};for(i=1;i<=200;i++)o["metric"+i]=null,o["dimension"+i]=null;function a(t,n){return(t.matches||t.msMatchesSelector).call(t,n)}function c(t,n){if(t.forEach)return t.forEach(n);for(var e=0;e<t.length;e++)n(t[e])}function r(t,n){const e=function(t,n){if(t.closest)return t.closest(n);if(!document.documentElement.contains(t))return null;do{if(a(t,n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}(t,"["+n+"]");if(null!==e)return e.getAttribute(n)}function u(){"function"==typeof ga&&ga("set",o)}function d(e,o){function i(t,n){return l(t)===n}const a={},d={list:function(t){const n=s(t);if(""===n.variant&&(n.variant=void 0),!i(n,t.getAttribute("data-analytics-sent"))){const e=n.list;delete n.list,a.list=a.list||{},a.list[e]=a.list[e]||[],a.list[e].push(n),n.list=e,n.el=t}return n},product:function(e){const o=s(e);return t.forEach((function(t){o[t]=r(e,t)})),n.forEach((function(t){o[t]=r(e,t)})),i(o,e.getAttribute("data-analytics-sent"))||(a.product=a.product||[],a.product.push(o)),o},"product-click":function(t){const n=s(t);return i(n,t.getAttribute("data-analytics-sent"))||f(t,"Product Clicked",n),n},promotion:function(e){const o=p(e);return t.forEach((function(t){o[t]=r(e,t)})),n.forEach((function(t){o[t]=r(e,t)})),i(o,e.getAttribute("data-analytics-sent"))||(a.promotion=a.promotion||[],a.promotion.push(o)),o},"promotion-click":function(t){const n=p(t);return i(n,t.getAttribute("data-analytics-sent"))||f(t,"Promotion Clicked",n),n}};c(e,(function(t){const n=t.getAttribute("data-event-type");var e="";n in d&&d[n]instanceof Function&&(e=d[n](t)),t.setAttribute("data-analytics-sent",l(e))})),c(Object.keys(a),(function(e){switch(e){case"list":c(Object.keys(a[e]),(function(i){const d={},s=a[e][i]&&a[e][i][0]&&a[e][i][0].currency?a[e][i][0].currency:"";var l=a[e][i].map((function(t){var n=t.el;return delete t.el,n})),f={list_id:i,category:i,currency:s,products:a[e][i].filter((function(t){const n=t.product_id+":"+t.position;return!d[n]&&(d[n]=!0,!0)}))};c(l,(function(e){c(t,(function(t){f[t]=r(e,t)})),c(n,(function(t){f[t]=r(e,t)}))})),o.track("Product List Viewed",f),u()}));break;case"product":c(a[e],(function(t){o.track("Product Viewed",t),u()}));break;case"promotion":c(a[e],(function(t){o.track("Promotion Viewed",t),u()}))}}))}function s(t){const n={product_id:r(t,"data-entity-id"),name:r(t,"data-name"),category:r(t,"data-product-category"),brand:r(t,"data-product-brand"),price:r(t,"data-product-price"),sku:r(t,"data-product-sku"),variant:r(t,"data-product-variant"),properties:e},o=r(t,"data-list-name"),i=r(t,"data-position");i&&(n.position=i),o&&(n.list=o);const a=r(t,"data-currency-code");return a&&(n.currency=a),n}function l(t){return JSON.stringify(t,(function(t,n){return void 0===n?null:n}))}function f(t,n,e){analytics.trackLink(t,n,e)}function p(t){return{promotion_id:r(t,"data-entity-id"),name:r(t,"data-name"),creative:r(t,"data-banner-id"),position:r(t,"data-position"),properties:e}}window.initDataTags=function(o,i,r,u){const s=["data-banner-id","data-entity-id","data-event-type","data-list-name","data-name","data-position","data-product-brand","data-product-category","data-product-price","data-product-sku","data-product-variant","data-currency-code"].concat(o).concat(i);t=o,n=i,e=u,r.ready((function(){setTimeout((function(){const t=[];c(document.body.querySelectorAll("[data-event-type]"),(function(n){t.push(n)})),d(t,r);new MutationObserver((function(t){const n=[];function e(t){a(t,"[data-event-type]")&&n.push(t),c(t.querySelectorAll("[data-event-type]"),(function(t){n.push(t)}))}c(t,(function(t){"childList"===t.type?c(t.addedNodes,(function(t){t instanceof Element&&e(t)})):"attributes"===t.type&&e(t.target)})),d(n,r)})).observe(document.body,{childList:!0,attributes:!0,subtree:!0,attributeFilter:s})}),100)}))}}();
//# sourceMappingURL=datatags-a6c27a4dafebddd5845000c8abc99b2096434171.js.map
